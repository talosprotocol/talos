apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

bases:
- ../../base

namespace: talos-system

commonLabels:
  environment: kind

# Disable name suffix hashing to prevent secret reference issues
generatorOptions:
  disableNameSuffixHash: true

secretGenerator:
- name: talos-secrets
  literals:
  - database-url=postgresql://talos:talos@postgres:5432/talos

# Image tags set by CI or manually via:
# kustomize edit set image talos-gateway=talos-gateway:<sha>
